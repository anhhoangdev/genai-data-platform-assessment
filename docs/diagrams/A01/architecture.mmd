```mermaid
graph TB
  %% A01 Architecture Topology
  %% Subgraphs for clarity
  subgraph Internet["Users (Corp / VPN)"]
    User["Engineers (20–30)"]
  end

  subgraph GCP["GCP Project"]
    KMS["KMS (CMEK)"]
    SM["Secret Manager"]
    WIF["Workload Identity Federation (GitHub Actions)"]

    subgraph VPC["VPC: data-platform"]
      subgraph MGMT["Subnet: management"]
        IAP["IAP TCP Forwarding"]
        Bastion["Bastion VM"]
        FreeIPA["FreeIPA Server"]
      end

      subgraph SRV["Subnet: services"]
        Filestore["Filestore Enterprise (NFS v4.1)"]
      end

      subgraph WS["Subnet: workstations"]
        MIG["Workstation MIG (0–10 instances)"]
      end
    end

    APIs["GCP APIs (Terraform/Ansible targets)"]
  end

  %% Access and Auth Flows
  User -->|OAuth2| IAP
  IAP -->|TCP Forwarding (SSH)| Bastion
  Bastion -->|LDAP/Kerberos (PAM/SSSD)| FreeIPA
  MIG -->|LDAP/Kerberos (SSSD)| FreeIPA
  MIG -->|NFS v4.1 via autofs (home dirs)| Filestore
  Bastion -.->|Admin/Bootstrap| Filestore

  %% CI/CD and Control Plane
  WIF -->|OIDC| APIs
  APIs -->|Provision| VPC
  APIs -->|Provision| Bastion
  APIs -->|Provision| FreeIPA
  APIs -->|Provision| Filestore
  APIs -->|Provision| MIG

  %% Security Controls
  KMS -->|CMEK| Filestore
  SM -->|Runtime Secrets| Bastion
  SM -->|Runtime Secrets| FreeIPA

  %% Notes
  classDef boundary fill:#f7f7f7,stroke:#bbb,stroke-width:1px;
  class VPC,MGMT,SRV,WS boundary;
```

```mermaid
% TODO: Fill with actual diagram content
```
